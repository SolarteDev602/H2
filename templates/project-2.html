<!--
  templateType: page
  isAvailableForNewContent: true
  label: Project 2
-->
{% extends "./layouts/base.html" %}

{% block body %}
    <div>
        <div class="container flex items-center gap-x-20 my-16">
            <div class="w-3/5">
                <span class="text-xs font-semibold leading-10 text-[#E76642] tracking-[.2em] uppercase block">Procacci Brothers</span>
                <h1 class="text-5xl font-bold leading-10 text-neutral-800">Estrella Naciente</h1>
                <p class="text-lg leading-snug text-[#5D636D] my-8">The “Estrella Naciente” Scholarship fund is dedicated to providing educational opportunities for young leaders in the Hispanic community. We created a video to detail these students’ struggles and highlight the company that is rewarding their hard work.
                </p>
            </div>
            <div class="w-2/5">
                <img src={{ get_asset_url('/theherd/images/ourwork/procacci-bg-1.png') }} class="w-full rounded-2xl"/>
            </div>
        </div>
        <div class="flex">
            <div class="flex-1 text-center bg-[#E76224] pt-9 pb-7">
                <h1 class="text-white font-bold text-4xl mb-2">150%</h1>
                <label class="text-white text-lg font-normal">Growth in site traffic and engagement</label>
            </div>
            <div class="flex-1 text-center bg-[#D65A18] pt-9 pb-7">
                <h1 class="text-white font-bold text-4xl mb-2">150%</h1>
                <label class="text-white text-lg font-normal">Growth in site traffic and engagement</label>
            </div>
            <div class="flex-1 text-center bg-[#BD4D12] pt-9 pb-7">
                <h1 class="text-white font-bold text-4xl mb-2">150%</h1>
                <label class="text-white text-lg font-normal">Growth in site traffic and engagement</label>
            </div>
        </div>
    </div>
    <div class="container flex flex-col gap-y-24 my-24">
        <h2 class="text-center text-[#252525] text-3xl font-bold">Development</h2>
        <div class="relative mx-auto h-[var(--slider-height)] w-[var(--slider-width)]">
            <div class="absolute h-[var(--slider-height)] w-[var(--slider-width)] rounded-md overflow-hidden select-none pointer-events-none">
              <img src={{ get_asset_url('/theherd/images/blogpostcover.png') }} class="h-[var(--slider-height)] w-[var(--slider-width)] object-cover rounded-2xl">
            </div>
            <div class="absolute h-[var(--slider-height)] w-[var(--slider-width)] rounded-md overflow-hidden select-none pointer-events-none border-r border-white border-solid compare__overlay">
              <img src={{ get_asset_url('/theherd/images/give-sheep.png') }} class="!max-w-none h-[var(--slider-height)] w-[var(--slider-width)] object-cover rounded-2xl">
            </div>
        </div>
        <div class="text-center">
            <a href="{{ module.consultation.link_field }}" class="inline-flex items-center justify-center h-12 px-7 py-3 button secondary-button rounded-md text-lg font-semibold">View The Full Website</a>
        </div>
    </div>
    <script>
    let isClicked = false;

    const image = document.querySelector(".compare__overlay");
    const width = image.offsetWidth;
    const height = image.offsetHeight;
    const slider = document.createElement("div");
    const circleSlider = document.createElement("div");
    const endSlider = document.createElement("div");
    compare();

    function compare() {
        image.parentElement.insertBefore(slider, image);
        image.parentElement.insertBefore(circleSlider, image);
        image.parentElement.insertBefore(endSlider, image);

        slider.classList.add("absolute", "cursor-grab", "bg-white", "z-10", "w-0.5", "h-[45%]" )
        circleSlider.classList.add("absolute", "cursor-grab", "z-20", "aspect-square", "h-[10%]", "rounded-[50%]", "bg-[url({{ get_asset_url('/theherd/images/projects/drag-button.png') }})]", "bg-cover", "bg-no-repeat", "active:cursor-grabbing");
        endSlider.classList.add("absolute", "cursor-grab", "bg-white", "z-10", "w-0.5", "h-[45%]")
        circleSlider.style.top = "45%";
        circleSlider.style.left = width / 2 - circleSlider.offsetWidth / 2 - 23 + "px";
        endSlider.style.top = "55%";
        endSlider.style.left = width / 2 - endSlider.offsetWidth / 2 + "px";

        slider.style.top = 0;
        slider.style.left = width / 2 - slider.offsetWidth / 2 + "px";
        image.style.width = "50%";

        circleSlider.addEventListener("mousedown", onSlideStart);
        circleSlider.addEventListener("touchstart", onSlideStart);

        window.addEventListener("mouseup", () => (isClicked = false));
        window.addEventListener("touchstop", () => (isClicked = false));

        window.addEventListener("mousemove", onSlideMove);
        window.addEventListener("touchmove", onSlideMove);
    }

    function onSlideStart(event) {
        event.preventDefault();
        isClicked = true;
    }

    function onSlideMove(event) {
        if (!isClicked) return;

        doSlide(currentPosition(event));
    }

    function currentPosition(event = window.event) {
        let xImage = image.getBoundingClientRect();
        let x = 0;

        x = event.pageX - xImage.left;

        if (x < 0) x = 0;

        if (x > width) x = width;

        return x;
    }

    function doSlide(x) {
        image.style.width = x + "px";
        slider.style.left = image.offsetWidth - slider.offsetWidth / 2 + "px";
        circleSlider.style.left = image.offsetWidth - circleSlider.offsetWidth / 2 + "px";
        endSlider.style.left = image.offsetWidth - endSlider.offsetWidth / 2 + "px";
    }

    </script>
{% endblock body %}
